<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noruto Evolution Fix æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        .btn:hover {
            background: #0056b3;
        }
        
        .output {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin-top: 15px;
        }
        
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .warning { color: #ffc107; }
        
        .evolution-card {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .material-item {
            background: #f3e5f5;
            border: 1px solid #9c27b0;
            border-radius: 5px;
            padding: 8px;
            margin: 5px 0;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Noruto Evolution Fix æµ‹è¯•é¡µé¢</h1>
        
        <div class="test-section">
            <h3>ğŸ§ª æµ‹è¯•Norutoè¿›åŒ–æ•°æ®</h3>
            <button class="btn" onclick="testNorutoData()">æµ‹è¯•Norutoæ•°æ®</button>
            <button class="btn" onclick="testEvolutionLookup()">æµ‹è¯•è¿›åŒ–æŸ¥æ‰¾</button>
            <button class="btn" onclick="testMaterialData()">æµ‹è¯•ææ–™æ•°æ®</button>
            <button class="btn" onclick="clearOutput()">æ¸…é™¤è¾“å‡º</button>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“Š æµ‹è¯•ç»“æœ</h3>
            <div id="testOutput" class="output">
                ç‚¹å‡»æµ‹è¯•æŒ‰é’®å¼€å§‹æµ‹è¯•...
            </div>
        </div>
    </div>

    <script type="module">
        // æ¨¡æ‹ŸevolutionData
        const mockEvolutionData = {
            "noruto": {
                unitId: "noruto",
                evolutions: [
                    {
                        tier: 1,
                        name: "Noruto",
                        requirements: { level: 1, materials: [], cost: 1500 },
                        statMultiplier: 1.0
                    },
                    {
                        tier: 2,
                        name: "Noruto (Six Tails)",
                        requirements: { 
                            level: 45, 
                            materials: ["Six Tails Chakra x3", "Wind Essence x5", "Chakra Crystal x2"], 
                            cost: 3500 
                        },
                        statMultiplier: 2.2
                    }
                ]
            }
        };

        // æ¨¡æ‹Ÿmaterialsæ•°æ®
        const mockMaterials = {
            "Six Tails Chakra": {
                name: "Six Tails Chakra",
                rarity: "Epic",
                source: ["Six Tails Event", "Bijuu Raid", "Wind Temple"],
                description: "Pure chakra from the Six Tails beast",
                dropRate: "15%",
                color: "#9c27b0"
            },
            "Wind Essence": {
                name: "Wind Essence",
                rarity: "Rare",
                source: ["Wind Temple", "Daily Material Dungeon", "Story Mode Ch15-20"],
                description: "Concentrated wind energy for wind-based evolutions",
                dropRate: "30%",
                color: "#2196f3"
            },
            "Chakra Crystal": {
                name: "Chakra Crystal",
                rarity: "Uncommon",
                source: ["Chakra Training Grounds", "Daily Material Dungeon", "Story Mode Ch10-15"],
                description: "Crystal containing pure chakra energy",
                dropRate: "45%",
                color: "#4caf50"
            }
        };

        // æµ‹è¯•Norutoæ•°æ®
        window.testNorutoData = function() {
            const output = document.getElementById('testOutput');
            output.innerHTML = 'ğŸ§ª å¼€å§‹æµ‹è¯•Norutoè¿›åŒ–æ•°æ®...\n\n';
            
            try {
                const norutoData = mockEvolutionData.noruto;
                
                if (norutoData) {
                    output.innerHTML += '<span class="success">âœ… Norutoè¿›åŒ–æ•°æ®æ‰¾åˆ°</span>\n\n';
                    output.innerHTML += 'ğŸ“Š è¿›åŒ–ä¿¡æ¯:\n';
                    output.innerHTML += `  - å•ä½ID: ${norutoData.unitId}\n`;
                    output.innerHTML += `  - è¿›åŒ–å±‚æ•°: ${norutoData.evolutions.length}\n\n`;
                    
                    // æ˜¾ç¤ºæ¯ä¸ªè¿›åŒ–å±‚
                    norutoData.evolutions.forEach((evolution, index) => {
                        output.innerHTML += `<div class="evolution-card">
  <strong>ç¬¬${evolution.tier}å±‚: ${evolution.name}</strong><br>
  - ç­‰çº§è¦æ±‚: ${evolution.requirements.level}<br>
  - é‡‘å¸æˆæœ¬: ${evolution.requirements.cost}<br>
  - ææ–™æ•°é‡: ${evolution.requirements.materials.length}<br>
  - å±æ€§å€æ•°: ${evolution.statMultiplier}x<br>
</div>`;
                    });
                    
                    output.innerHTML += '\n<span class="success">âœ… Norutoæ•°æ®æµ‹è¯•å®Œæˆ</span>\n';
                } else {
                    output.innerHTML += '<span class="error">âŒ Norutoè¿›åŒ–æ•°æ®æœªæ‰¾åˆ°</span>\n';
                }
                
            } catch (error) {
                output.innerHTML += `<span class="error">âŒ æµ‹è¯•å¤±è´¥: ${error.message}</span>\n`;
                console.error('Test failed:', error);
            }
        };

        // æµ‹è¯•è¿›åŒ–æŸ¥æ‰¾
        window.testEvolutionLookup = function() {
            const output = document.getElementById('testOutput');
            output.innerHTML = 'ğŸ” å¼€å§‹æµ‹è¯•è¿›åŒ–æŸ¥æ‰¾...\n\n';
            
            try {
                // æ¨¡æ‹Ÿå•ä½é€‰æ‹©
                const selectedUnit = {
                    id: "noruto",
                    name: "Noruto",
                    rarity: "Mythic",
                    element: "Wind"
                };
                
                output.innerHTML += 'ğŸ“‹ é€‰æ‹©çš„å•ä½:\n';
                output.innerHTML += `  - ID: ${selectedUnit.id}\n`;
                output.innerHTML += `  - åç§°: ${selectedUnit.name}\n`;
                output.innerHTML += `  - ç¨€æœ‰åº¦: ${selectedUnit.rarity}\n`;
                output.innerHTML += `  - å…ƒç´ : ${selectedUnit.element}\n\n`;
                
                // ç”Ÿæˆå•ä½ID
                const unitId = selectedUnit.name.toLowerCase().replace(/\s+/g, '');
                output.innerHTML += `ğŸ”‘ ç”Ÿæˆçš„å•ä½ID: ${unitId}\n`;
                
                // æŸ¥æ‰¾è¿›åŒ–æ•°æ®
                const evolutionInfo = mockEvolutionData[unitId];
                if (evolutionInfo) {
                    output.innerHTML += '<span class="success">âœ… è¿›åŒ–æ•°æ®æŸ¥æ‰¾æˆåŠŸ</span>\n';
                    output.innerHTML += `  - æ‰¾åˆ°æ•°æ®: ${!!evolutionInfo}\n`;
                    output.innerHTML += `  - è¿›åŒ–å±‚æ•°: ${evolutionInfo.evolutions.length}\n`;
                } else {
                    output.innerHTML += '<span class="error">âŒ è¿›åŒ–æ•°æ®æŸ¥æ‰¾å¤±è´¥</span>\n';
                }
                
                output.innerHTML += '\n<span class="success">âœ… è¿›åŒ–æŸ¥æ‰¾æµ‹è¯•å®Œæˆ</span>\n';
                
            } catch (error) {
                output.innerHTML += `<span class="error">âŒ æµ‹è¯•å¤±è´¥: ${error.message}</span>\n`;
                console.error('Test failed:', error);
            }
        };

        // æµ‹è¯•ææ–™æ•°æ®
        window.testMaterialData = function() {
            const output = document.getElementById('testOutput');
            output.innerHTML = 'ğŸ§ª å¼€å§‹æµ‹è¯•ææ–™æ•°æ®...\n\n';
            
            try {
                const norutoData = mockEvolutionData.noruto;
                const tier2Evolution = norutoData.evolutions[1]; // ç¬¬äºŒå±‚è¿›åŒ–
                
                output.innerHTML += 'ğŸ“¦ ç¬¬äºŒå±‚è¿›åŒ–ææ–™:\n';
                output.innerHTML += `  - è¿›åŒ–åç§°: ${tier2Evolution.name}\n`;
                output.innerHTML += `  - ææ–™æ•°é‡: ${tier2Evolution.requirements.materials.length}\n\n`;
                
                // æ˜¾ç¤ºæ¯ä¸ªææ–™
                tier2Evolution.requirements.materials.forEach(materialString => {
                    const materialName = materialString.split(' x')[0];
                    const materialData = mockMaterials[materialName];
                    
                    if (materialData) {
                        output.innerHTML += `<div class="material-item">
  <strong>${materialData.name}</strong><br>
  - ç¨€æœ‰åº¦: ${materialData.rarity}<br>
  - æ‰è½ç‡: ${materialData.dropRate}<br>
  - æ¥æº: ${materialData.source.join(', ')}<br>
</div>`;
                    } else {
                        output.innerHTML += `<div class="material-item">
  <strong>${materialName}</strong> - ææ–™æ•°æ®æœªæ‰¾åˆ°
</div>`;
                    }
                });
                
                output.innerHTML += '\n<span class="success">âœ… ææ–™æ•°æ®æµ‹è¯•å®Œæˆ</span>\n';
                
            } catch (error) {
                output.innerHTML += `<span class="error">âŒ æµ‹è¯•å¤±è´¥: ${error.message}</span>\n`;
                console.error('Test failed:', error);
            }
        };

        // æ¸…é™¤è¾“å‡º
        window.clearOutput = function() {
            document.getElementById('testOutput').innerHTML = 'ç‚¹å‡»æµ‹è¯•æŒ‰é’®å¼€å§‹æµ‹è¯•...';
            console.log('ğŸ—‘ï¸ è¾“å‡ºå·²æ¸…é™¤');
        };

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ Noruto Evolution Fix æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('ğŸ“Š æ¨¡æ‹Ÿæ•°æ®å·²å‡†å¤‡å°±ç»ª');
            console.log('ğŸ” å¯ä»¥å¼€å§‹æµ‹è¯•Norutoè¿›åŒ–æ•°æ®');
        });
    </script>
</body>
</html>
