<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tier List Data Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 2rem;
            background: #1a1a2e;
            color: white;
        }
        .test-section {
            margin-bottom: 2rem;
            padding: 1rem;
            background: rgba(108, 92, 231, 0.1);
            border-radius: 8px;
        }
        pre {
            background: #2c3e50;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>🧪 Tier List Data System Test</h1>
    
    <div class="test-section">
        <h2>Test Results</h2>
        <div id="testResults"></div>
    </div>

    <script type="module">
        import { TierListDataManager, TIER_INFO, ELEMENT_INFO, RARITY_INFO } from './js/tier-list-data.js';
        
        async function runTests() {
            const results = document.getElementById('testResults');
            const dataManager = new TierListDataManager();
            
            try {
                results.innerHTML = '<p>🔄 Running tests...</p>';
                
                // Test 1: Load all data
                console.log('Test 1: Loading all data...');
                const allData = await dataManager.getAllData();
                
                // Test 2: Get statistics
                console.log('Test 2: Getting statistics...');
                const stats = await dataManager.getStatistics();
                
                // Test 3: Filter by tier
                console.log('Test 3: Filtering by BROKEN tier...');
                const brokenTier = await dataManager.getCharactersByTier('BROKEN');
                
                // Test 4: Search functionality
                console.log('Test 4: Searching for "Song"...');
                const searchResults = await dataManager.filterCharacters({ search: 'Song' });
                
                // Display results
                results.innerHTML = `
                    <h3>✅ All Tests Passed!</h3>
                    
                    <h4>📊 Statistics:</h4>
                    <pre>${JSON.stringify(stats, null, 2)}</pre>
                    
                    <h4>🔥 BROKEN Tier Characters (${brokenTier.length}):</h4>
                    <ul>
                        ${brokenTier.map(char => `<li>${char.name} - ${char.element} - ¥${char.deploymentCost.toLocaleString()}</li>`).join('')}
                    </ul>
                    
                    <h4>🔍 Search Results for "Song" (${searchResults.length}):</h4>
                    <ul>
                        ${searchResults.map(char => `<li>${char.name} - ${char.tier} - ${char.description}</li>`).join('')}
                    </ul>
                    
                    <h4>📈 Data Structure Info:</h4>
                    <p><strong>Total Tiers:</strong> ${Object.keys(TIER_INFO).length}</p>
                    <p><strong>Elements:</strong> ${Object.keys(ELEMENT_INFO).join(', ')}</p>
                    <p><strong>Rarities:</strong> ${Object.keys(RARITY_INFO).join(', ')}</p>
                `;
                
            } catch (error) {
                results.innerHTML = `
                    <h3>❌ Test Failed!</h3>
                    <p>Error: ${error.message}</p>
                    <pre>${error.stack}</pre>
                `;
                console.error('Test failed:', error);
            }
        }
        
        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>