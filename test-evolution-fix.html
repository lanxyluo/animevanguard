<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¿›åŒ–ç³»ç»Ÿä¿®å¤æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(162, 155, 254, 0.3);
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #4facfe;
            border-bottom: 2px solid #4facfe;
            padding-bottom: 10px;
        }
        
        .btn {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }
        
        .output {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin-top: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .success { color: #4caf50; }
        .error { color: #f44336; }
        .warning { color: #ff9800; }
        .info { color: #2196f3; }
        
        .evolution-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .evolution-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .evolution-card h4 {
            color: #00f2fe;
            margin-top: 0;
        }
        
        .material-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 3px solid #4facfe;
        }
        
        .evolution-step {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .evolution-step h5 {
            color: #4facfe;
            margin-top: 0;
        }
        
        .cost-summary {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(162, 155, 254, 0.3);
        }
        
        .cost-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .cost-card {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            color: white;
            font-weight: bold;
        }
        
        .cost-card.gold {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
        }
        
        .cost-card.gems {
            background: linear-gradient(135deg, #9c27b0, #e91e63);
        }
        
        .cost-card.materials {
            background: linear-gradient(135deg, #2196f3, #00bcd4);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ è¿›åŒ–ç³»ç»Ÿä¿®å¤æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>ğŸ§ª æµ‹è¯•è¿›åŒ–ç³»ç»Ÿ</h3>
            <button class="btn" onclick="testEvolutionSystem()">æµ‹è¯•è¿›åŒ–ç³»ç»Ÿ</button>
            <button class="btn" onclick="testContainerIds()">æµ‹è¯•å®¹å™¨ID</button>
            <button class="btn" onclick="testDataFlow()">æµ‹è¯•æ•°æ®æµ</button>
            <button class="btn" onclick="clearOutput()">æ¸…é™¤è¾“å‡º</button>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“Š æµ‹è¯•ç»“æœ</h3>
            <div id="testOutput" class="output">
                ç‚¹å‡»æµ‹è¯•æŒ‰é’®å¼€å§‹æµ‹è¯•...
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ—ï¸ è¿›åŒ–ç³»ç»Ÿæ˜¾ç¤º</h3>
            <div id="evolutionDisplay" class="evolution-display">
                <div class="evolution-card">
                    <h4>Evolution Requirements</h4>
                    <div id="evolution-requirements">
                        <p>ç­‰å¾…æµ‹è¯•æ•°æ®...</p>
                    </div>
                </div>
                
                <div class="evolution-card">
                    <h4>Cost Summary</h4>
                    <div id="cost-summary">
                        <p>ç­‰å¾…æµ‹è¯•æ•°æ®...</p>
                    </div>
                </div>
                
                <div class="evolution-card">
                    <h4>Evolution Materials</h4>
                    <div id="evolution-materials">
                        <p>ç­‰å¾…æµ‹è¯•æ•°æ®...</p>
                    </div>
                </div>
                
                <div class="evolution-card">
                    <h4>Farming Guide</h4>
                    <div id="farming-guide">
                        <p>ç­‰å¾…æµ‹è¯•æ•°æ®...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿè¿›åŒ–æ•°æ®
        const mockEvolutionData = {
            "noruto": {
                unitId: "noruto",
                name: "Noruto",
                rarity: "Mythic",
                element: "Wind",
                evolutions: [
                    {
                        tier: 1,
                        name: "Noruto",
                        statMultiplier: 1.0,
                        requirements: {
                            level: 1,
                            cost: 0,
                            gems: 0,
                            materials: []
                        }
                    },
                    {
                        tier: 2,
                        name: "Noruto (Six Tails)",
                        statMultiplier: 1.5,
                        requirements: {
                            level: 50,
                            cost: 5000,
                            gems: 0,
                            materials: [
                                "Flame Heart x4",
                                "Hashira Spirit x1",
                                "Unyielding Will x1"
                            ]
                        }
                    },
                    {
                        tier: 3,
                        name: "Noruto (Nine Tails)",
                        statMultiplier: 2.0,
                        requirements: {
                            level: 100,
                            cost: 10000,
                            gems: 125,
                            materials: [
                                "Eternal Flame x3",
                                "Hashira Legacy x2",
                                "Father's Pride x1",
                                "Flame Pillar x5"
                            ]
                        }
                    }
                ]
            }
        };

        // æ¨¡æ‹ŸgetContaineræ–¹æ³•
        function getContainer(type) {
            const selectors = [
                `[data-${type}]`,
                `.${type}`,
                `#${type}`,
                `[data-${type.replace('-', '')}]`,
                `.${type.replace('-', '')}`
            ];
            
            for (const selector of selectors) {
                const element = document.querySelector(selector);
                if (element) return element;
            }
            
            console.warn(`Container not found for type: ${type}`);
            return null;
        }

        // æµ‹è¯•è¿›åŒ–ç³»ç»Ÿ
        window.testEvolutionSystem = function() {
            const output = document.getElementById('testOutput');
            output.innerHTML = 'ğŸ§ª å¼€å§‹æµ‹è¯•è¿›åŒ–ç³»ç»Ÿ...\n\n';
            
            // æµ‹è¯•å®¹å™¨æŸ¥æ‰¾
            const containers = ['evolution-requirements', 'cost-summary', 'evolution-materials', 'farming-guide'];
            let allFound = true;
            
            containers.forEach(containerType => {
                const container = getContainer(containerType);
                
                if (container) {
                    output.innerHTML += `<span class="success">âœ… ${containerType}: æ‰¾åˆ°å®¹å™¨</span>\n`;
                    output.innerHTML += `  - å…ƒç´ : ${container.tagName}\n`;
                    output.innerHTML += `  - ID: ${container.id}\n`;
                    output.innerHTML += `  - ç±»å: ${container.className}\n\n`;
                } else {
                    output.innerHTML += `<span class="error">âŒ ${containerType}: å®¹å™¨æœªæ‰¾åˆ°</span>\n\n`;
                    allFound = false;
                }
            });
            
            if (allFound) {
                output.innerHTML += '<span class="success">ğŸ‰ æ‰€æœ‰å®¹å™¨éƒ½æ‰¾åˆ°äº†ï¼</span>\n';
                output.innerHTML += 'ç°åœ¨å¯ä»¥å¼€å§‹æµ‹è¯•æ•°æ®æ˜¾ç¤º...\n\n';
                
                // æ¨¡æ‹Ÿé€‰æ‹©Noruto
                simulateNorutoSelection();
            } else {
                output.innerHTML += '<span class="error">âš ï¸ éƒ¨åˆ†å®¹å™¨æœªæ‰¾åˆ°ï¼Œéœ€è¦æ£€æŸ¥HTMLç»“æ„</span>\n';
            }
        };

        // æµ‹è¯•å®¹å™¨ID
        window.testContainerIds = function() {
            const output = document.getElementById('testOutput');
            output.innerHTML = 'ğŸ” å¼€å§‹æµ‹è¯•å®¹å™¨ID...\n\n';
            
            const testCases = [
                'evolution-requirements',
                'cost-summary',
                'evolution-materials', 
                'farming-guide'
            ];
            
            testCases.forEach(testCase => {
                output.innerHTML += `ğŸ” æµ‹è¯•æŸ¥æ‰¾: ${testCase}\n`;
                
                const selectors = [
                    `[data-${testCase}]`,
                    `.${testCase}`,
                    `#${testCase}`,
                    `[data-${testCase.replace('-', '')}]`,
                    `.${testCase.replace('-', '')}`
                ];
                
                let found = false;
                selectors.forEach((selector, index) => {
                    const element = document.querySelector(selector);
                    if (element) {
                        output.innerHTML += `  âœ… é€‰æ‹©å™¨ ${index + 1}: ${selector}\n`;
                        found = true;
                    } else {
                        output.innerHTML += `  âŒ é€‰æ‹©å™¨ ${index + 1}: ${selector}\n`;
                    }
                });
                
                if (found) {
                    output.innerHTML += `  <span class="success">âœ… ${testCase} æŸ¥æ‰¾æˆåŠŸ</span>\n\n`;
                } else {
                    output.innerHTML += `  <span class="error">âŒ ${testCase} æŸ¥æ‰¾å¤±è´¥</span>\n\n`;
                }
            });
        };

        // æµ‹è¯•æ•°æ®æµ
        window.testDataFlow = function() {
            const output = document.getElementById('testOutput');
            output.innerHTML = 'ğŸ“Š å¼€å§‹æµ‹è¯•æ•°æ®æµ...\n\n';
            
            const norutoData = mockEvolutionData.noruto;
            
            if (norutoData) {
                output.innerHTML += `<span class="success">âœ… Norutoæ•°æ®éªŒè¯:</span>\n`;
                output.innerHTML += `  - åç§°: ${norutoData.name}\n`;
                output.innerHTML += `  - ç¨€æœ‰åº¦: ${norutoData.rarity}\n`;
                output.innerHTML += `  - å…ƒç´ : ${norutoData.element}\n`;
                output.innerHTML += `  - è¿›åŒ–é˜¶æ®µ: ${norutoData.evolutions.length}\n\n`;
                
                // è®¡ç®—æ€»æˆæœ¬
                const totalCost = norutoData.evolutions.reduce((sum, evo) => sum + evo.requirements.cost, 0);
                const totalGems = norutoData.evolutions.reduce((sum, evo) => sum + evo.requirements.gems, 0);
                const totalMaterials = norutoData.evolutions.reduce((sum, evo) => sum + evo.requirements.materials.length, 0);
                
                output.innerHTML += `<span class="info">ğŸ’° æˆæœ¬è®¡ç®—:</span>\n`;
                output.innerHTML += `  - æ€»é‡‘å¸: ${totalCost.toLocaleString()}\n`;
                output.innerHTML += `  - æ€»å®çŸ³: ${totalGems}\n`;
                output.innerHTML += `  - æ€»ææ–™: ${totalMaterials}\n\n`;
                
                output.innerHTML += '<span class="success">âœ… æ•°æ®æµæµ‹è¯•å®Œæˆï¼</span>\n';
            } else {
                output.innerHTML += '<span class="error">âŒ æœªæ‰¾åˆ°Norutoæ•°æ®</span>\n';
            }
        };

        // æ¨¡æ‹Ÿé€‰æ‹©Noruto
        function simulateNorutoSelection() {
            const output = document.getElementById('testOutput');
            output.innerHTML += 'ğŸ¯ æ¨¡æ‹Ÿé€‰æ‹©Noruto...\n\n';
            
            const norutoData = mockEvolutionData.noruto;
            
            // æ›´æ–°Evolution Requirements
            const evoContainer = getContainer('evolution-requirements');
            if (evoContainer) {
                const evoHtml = `
                    <div class="evolution-requirements">
                        <h5>è¿›åŒ–è·¯å¾„</h5>
                        ${norutoData.evolutions.map((evo, index) => `
                            <div class="evolution-step">
                                <h5>${evo.name}</h5>
                                <p>å±æ€§å€æ•°: ${evo.statMultiplier}x</p>
                                <p>ç­‰çº§è¦æ±‚: ${evo.requirements.level}</p>
                                <p>é‡‘å¸æˆæœ¬: ${evo.requirements.cost.toLocaleString()}</p>
                                ${evo.requirements.gems > 0 ? `<p>å®çŸ³æˆæœ¬: ${evo.requirements.gems}</p>` : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
                evoContainer.innerHTML = evoHtml;
                output.innerHTML += '<span class="success">âœ… Evolution Requirements å·²æ›´æ–°</span>\n';
            }

            // æ›´æ–°Cost Summary
            const costContainer = getContainer('cost-summary');
            if (costContainer) {
                const totalCost = norutoData.evolutions.reduce((sum, evo) => sum + evo.requirements.cost, 0);
                const totalGems = norutoData.evolutions.reduce((sum, evo) => sum + evo.requirements.gems, 0);
                const totalMaterials = norutoData.evolutions.reduce((sum, evo) => sum + evo.requirements.materials.length, 0);
                
                const costHtml = `
                    <div class="cost-summary">
                        <h4>æ€»è¿›åŒ–æˆæœ¬</h4>
                        <div class="cost-cards">
                            <div class="cost-card gold">
                                <div>ğŸ’°</div>
                                <div>${totalCost.toLocaleString()}</div>
                                <div>é‡‘å¸</div>
                            </div>
                            ${totalGems > 0 ? `
                                <div class="cost-card gems">
                                    <div>ğŸ’</div>
                                    <div>${totalGems}</div>
                                    <div>å®çŸ³</div>
                                </div>
                            ` : ''}
                            <div class="cost-card materials">
                                <div>ğŸ§ª</div>
                                <div>${totalMaterials}</div>
                                <div>ææ–™</div>
                            </div>
                        </div>
                    </div>
                `;
                costContainer.innerHTML = costHtml;
                output.innerHTML += '<span class="success">âœ… Cost Summary å·²æ›´æ–°</span>\n';
            }

            // æ›´æ–°Materials
            const materialsContainer = getContainer('evolution-materials');
            if (materialsContainer) {
                const allMaterials = new Map();
                norutoData.evolutions.forEach(evo => {
                    evo.requirements.materials.forEach(material => {
                        const [name, quantity] = material.split(' x');
                        const existing = allMaterials.get(name) || 0;
                        allMaterials.set(name, existing + parseInt(quantity || 1));
                    });
                });

                const materialsHtml = `
                    <div class="materials-list">
                        <h5>æ‰€éœ€ææ–™</h5>
                        ${Array.from(allMaterials.entries()).map(([name, quantity]) => `
                            <div class="material-item">
                                ${name} x${quantity}
                            </div>
                        `).join('')}
                    </div>
                `;
                materialsContainer.innerHTML = materialsHtml;
                output.innerHTML += '<span class="success">âœ… Evolution Materials å·²æ›´æ–°</span>\n';
            }

            // æ›´æ–°Farming Guide
            const farmingContainer = getContainer('farming-guide');
            if (farmingContainer) {
                const farmingHtml = `
                    <div class="farming-guide">
                        <h5>å†œåœºæŒ‡å—</h5>
                        <p>æ¨èå†œåœºæ–¹æ³•:</p>
                        <ul>
                            <li>æ¯æ—¥ææ–™åœ°ä¸‹åŸ (70-80% æ‰è½ç‡)</li>
                            <li>æ¯å‘¨BossæŒ‘æˆ˜ (25-30% æ‰è½ç‡)</li>
                            <li>æœˆåº¦ä¼ å¥‡äº‹ä»¶ (2-3% æ‰è½ç‡)</li>
                        </ul>
                    </div>
                `;
                farmingContainer.innerHTML = farmingHtml;
                output.innerHTML += '<span class="success">âœ… Farming Guide å·²æ›´æ–°</span>\n';
            }

            output.innerHTML += '\n<span class="success">ğŸ‰ æ‰€æœ‰æ˜¾ç¤ºåŒºåŸŸéƒ½å·²æ›´æ–°å®Œæˆï¼</span>\n';
        }

        // æ¸…é™¤è¾“å‡º
        window.clearOutput = function() {
            document.getElementById('testOutput').innerHTML = 'ç‚¹å‡»æµ‹è¯•æŒ‰é’®å¼€å§‹æµ‹è¯•...';
            console.log('ğŸ—‘ï¸ è¾“å‡ºå·²æ¸…é™¤');
        };

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ è¿›åŒ–ç³»ç»Ÿä¿®å¤æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('ğŸ§ª æ¨¡æ‹Ÿæ•°æ®å·²å‡†å¤‡å°±ç»ª');
            console.log('ğŸ” å¯ä»¥å¼€å§‹æµ‹è¯•è¿›åŒ–ç³»ç»Ÿ');
        });
    </script>
</body>
</html>
